"""
Testy dla pozostałych endpointów (Groups, Services, Contracts, itp.)
"""
import json
import pytest
from datetime import datetime, timedelta


class TestGroupsEndpoints:
    """Testy dla endpointów /api/Groups"""

    def test_get_groups_success(self, client, auth_headers_admin):
        """Test pobierania listy grup"""
        response = client.get('/api/Groups/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]  # Zależnie od implementacji

    def test_create_group(self, client, auth_headers_admin):
        """Test tworzenia grupy"""
        response = client.post('/api/Groups/',
                               headers=auth_headers_admin,
                               data=json.dumps({
                                   'name': 'Nowa Grupa',
                                   'description': 'Opis grupy'
                               }),
                               content_type='application/json')

        assert response.status_code in [200, 201, 401]


class TestServicesEndpoints:
    """Testy dla endpointów /api/Services"""

    def test_get_services_success(self, client, auth_headers_admin):
        """Test pobierania listy usług"""
        response = client.get('/api/Services/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]

    def test_create_service(self, client, auth_headers_admin):
        """Test tworzenia usługi"""
        response = client.post('/api/Services/',
                               headers=auth_headers_admin,
                               data=json.dumps({
                                   'name': 'Nowa Usługa',
                                   'description': 'Opis usługi',
                                   'price': 250.00
                               }),
                               content_type='application/json')

        assert response.status_code in [200, 201, 401]


class TestContractsEndpoints:
    """Testy dla endpointów /api/Contracts"""

    def test_get_contracts_success(self, client, auth_headers_admin):
        """Test pobierania listy umów"""
        response = client.get('/api/Contracts/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]

    def test_create_contract(self, client, auth_headers_admin):
        """Test tworzenia umowy"""
        response = client.post('/api/Contracts/',
                               headers=auth_headers_admin,
                               data=json.dumps({
                                   'customerId': 1,
                                   'title': 'Nowa Umowa',
                                   'content': 'Treść umowy',
                                   'startDate': datetime.now().isoformat(),
                                   'endDate': (datetime.now() + timedelta(days=365)).isoformat()
                               }),
                               content_type='application/json')

        assert response.status_code in [200, 201, 401]


class TestNotesEndpoints:
    """Testy dla endpointów /api/Notes"""

    def test_get_notes_success(self, client, auth_headers_admin):
        """Test pobierania listy notatek"""
        response = client.get('/api/Notes/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]

    def test_create_note(self, client, auth_headers_admin):
        """Test tworzenia notatki"""
        response = client.post('/api/Notes/',
                               headers=auth_headers_admin,
                               data=json.dumps({
                                   'customerId': 1,
                                   'content': 'Treść notatki',
                                   'title': 'Tytuł notatki'
                               }),
                               content_type='application/json')

        assert response.status_code in [200, 201, 401]


class TestMessagesEndpoints:
    """Testy dla endpointów /api/Messages"""

    def test_get_messages_success(self, client, auth_headers_admin):
        """Test pobierania listy wiadomości"""
        response = client.get('/api/Messages/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]

    def test_send_message(self, client, auth_headers_admin):
        """Test wysyłania wiadomości"""
        response = client.post('/api/Messages/',
                               headers=auth_headers_admin,
                               data=json.dumps({
                                   'receiverId': 2,
                                   'content': 'Treść wiadomości'
                               }),
                               content_type='application/json')

        assert response.status_code in [200, 201, 401]


class TestTagsEndpoints:
    """Testy dla endpointów /api/Tags"""

    def test_get_tags_success(self, client, auth_headers_admin):
        """Test pobierania listy tagów"""
        response = client.get('/api/Tags/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]

    def test_create_tag(self, client, auth_headers_admin):
        """Test tworzenia tagu"""
        response = client.post('/api/Tags/',
                               headers=auth_headers_admin,
                               data=json.dumps({
                                   'name': 'Nowy Tag',
                                   'color': '#FF0000'
                               }),
                               content_type='application/json')

        assert response.status_code in [200, 201, 401]


class TestNotificationsEndpoints:
    """Testy dla endpointów /api/Notifications"""

    def test_get_notifications_success(self, client, auth_headers_admin):
        """Test pobierania listy powiadomień"""
        response = client.get('/api/Notifications/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]


class TestActivitiesEndpoints:
    """Testy dla endpointów /api/Activities"""

    def test_get_activities_success(self, client, auth_headers_admin):
        """Test pobierania listy aktywności"""
        response = client.get('/api/Activities/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]


class TestDashboardEndpoints:
    """Testy dla endpointów /api/dashboard"""

    def test_get_dashboard_stats(self, client, auth_headers_admin):
        """Test pobierania statystyk dashboardu"""
        response = client.get('/api/dashboard/stats',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401, 404]


class TestProfileEndpoints:
    """Testy dla endpointów /api/Profile"""

    def test_get_profile_success(self, client, auth_headers_admin):
        """Test pobierania profilu"""
        response = client.get('/api/Profile/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]


class TestSettingsEndpoints:
    """Testy dla endpointów /api/Settings"""

    def test_get_settings_success(self, client, auth_headers_admin):
        """Test pobierania ustawień"""
        response = client.get('/api/Settings/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]


class TestRemindersEndpoints:
    """Testy dla endpointów /api/Reminders"""

    def test_get_reminders_success(self, client, auth_headers_admin):
        """Test pobierania listy przypomnień"""
        response = client.get('/api/Reminders/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]

    def test_create_reminder(self, client, auth_headers_admin):
        """Test tworzenia przypomnienia"""
        response = client.post('/api/Reminders/',
                               headers=auth_headers_admin,
                               data=json.dumps({
                                   'title': 'Nowe przypomnienie',
                                   'description': 'Opis',
                                   'reminderDate': (datetime.now() + timedelta(days=1)).isoformat()
                               }),
                               content_type='application/json')

        assert response.status_code in [200, 201, 401]


class TestPaymentsEndpoints:
    """Testy dla endpointów /api/Payments"""

    def test_get_payments_success(self, client, auth_headers_admin):
        """Test pobierania listy płatności"""
        response = client.get('/api/Payments/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]


class TestMeetingsEndpoints:
    """Testy dla endpointów spotkań"""

    def test_get_meetings_success(self, client, auth_headers_admin):
        """Test pobierania listy spotkań"""
        # Endpoint może być pod różnymi ścieżkami
        response = client.get('/api/Meetings/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401, 404]


class TestCalendarEventsEndpoints:
    """Testy dla endpointów /api/CalendarEvents"""

    def test_get_calendar_events_success(self, client, auth_headers_admin):
        """Test pobierania listy wydarzeń"""
        response = client.get('/api/CalendarEvents/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]


class TestTemplatesEndpoints:
    """Testy dla endpointów /api/Templates"""

    def test_get_templates_success(self, client, auth_headers_admin):
        """Test pobierania listy szablonów"""
        response = client.get('/api/Templates/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]


class TestLogsEndpoints:
    """Testy dla endpointów /api/Logs"""

    def test_get_logs_success(self, client, auth_headers_admin):
        """Test pobierania listy logów"""
        response = client.get('/api/Logs/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401]


class TestReportsEndpoints:
    """Testy dla endpointów /api/reports"""

    def test_get_reports_success(self, client, auth_headers_admin):
        """Test pobierania raportów"""
        response = client.get('/api/reports/',
                              headers=auth_headers_admin)

        assert response.status_code in [200, 401, 404]
